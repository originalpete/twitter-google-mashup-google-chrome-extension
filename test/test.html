<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Tweet @ replace tests</title>
    
    <link rel="stylesheet" href="http://github.com/jquery/qunit/raw/master/qunit/qunit.css" type="text/css" media="screen" />

    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://github.com/jquery/qunit/raw/master/qunit/qunit.js"></script>
    
    

    <script type="text/javascript">
      //<![CDATA[
      
      function linkTwitterName(tweet) {
        return tweet.replace(/@(\w+)/g, "<a href='http://twitter.com/$1'>$&</a>");
      }
      
      $(function () {
        
        test("it should not replace anything when no @ found", function () {
          expect(1);
          equals(linkTwitterName("some text"), "some text");
        });
        
        test("it should not replace single @", function () {
          expect(1);
          equals(linkTwitterName("@ some @ text @"), "@ some @ text @");
        });
        
        test("it should replace @foo with a link", function () {
          expect(1);
          equals(linkTwitterName("some @foo text"), "some <a href='http://twitter.com/foo'>@foo</a> text");
        });
        
        test("it should replace @foo, @bar and @foobar", function () {
          expect(1);
          equals(linkTwitterName("@foo some @bar text @foobar"), "<a href='http://twitter.com/foo'>@foo</a> some <a href='http://twitter.com/bar'>@bar</a> text <a href='http://twitter.com/foobar'>@foobar</a>");
        });
        
        test("it should replace @foo preceeded and followed by comma", function () {
          expect(1);
          equals(linkTwitterName("some,@foo,text"), "some,<a href='http://twitter.com/foo'>@foo</a>,text")
        });
        
        test("it should replace @foo preceeded and followed by fullstop", function () {
          expect(1);
          equals(linkTwitterName("some.@foo.text"), "some.<a href='http://twitter.com/foo'>@foo</a>.text")
        });
        
      });

      //]]>
    </script>
    
  </head>
  <body>
    <h1 id="qunit-header">
      QUnit example
    </h1>
    <h2 id="qunit-banner"></h2>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
  </body>
</html>
